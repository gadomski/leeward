name: leeward
about: Computes total propogated error (TPU) for airborne lidar data.
args:
    - quiet:
        short: q
        long: quiet
        help: Disables progress reporting
subcommands:
    - project-trajectory:
        about: Projects a trajectory into UTM coordinates
        args:
            - TRAJECTORY:
                required: true
                index: 1
                help: The SBET trajectory (.out)
            - UTM_ZONE:
                required: true
                index: 2
                help: The UTM zone for the output data 
            - OUTFILE:
                required: true
                index: 3
                help: The output CSV file
            - decimation:
                short: d
                long: decimation
                takes_value: true
                help: The amount to decimate the output points
    - tpu:
        about: Calculates total propogated error
        args:
            - TRAJECTORY:
                required: true
                index: 1
                help: The SBET trajectory (.out)
            - LASFILE:
                required: true
                index: 2
                help: The input las file
            - CONFIG:
                required: true
                index: 3
                help: The configuration file
            - OUTFILE:
                required: true
                index: 4
                help: The output csv file
            - decimation:
                short: d
                long: decimation
                takes_value: true
                help: The amount to decimate the output points
    - platform:
        about: Converts points to platform's coordinate system
        args:
            - TRAJECTORY:
                required: true
                index: 1
                help: The SBET trajectory (.out)
            - LASFILE:
                required: true
                index: 2
                help: The input las file
            - CONFIG:
                required: true
                index: 3
                help: The configuration file
            - OUTFILE:
                required: true
                index: 4
                help: The output csv file
            - decimation:
                short: d
                long: decimation
                takes_value: true
                help: The amount to decimate the output points
    - backconvert:
        about: Recalculates the point cloud using the lidar equation and the provided boresight and lever arm configuration
        args:
            - TRAJECTORY:
                required: true
                index: 1
                help: The SBET trajectory (.out)
            - LASFILE:
                required: true
                index: 2
                help: The input las file
            - CONFIG:
                required: true
                index: 3
                help: The configuration file
            - OUTFILE:
                required: true
                index: 4
                help: The output csv file
            - decimation:
                short: d
                long: decimation
                takes_value: true
                help: The amount to decimate the output points
            - original:
                long: original
                help: Pass this flag to write the original XYZ points from the las file, not the backconverted values.
            - gps-time:
                long: gps-time
                help: Write the GPS time
            - range:
                long: range
                help: Write the range, as calculated from the IMU location to the point
            - scan-angle:
                long: scan-angle
                help: Write the scan angle as calculated from the plane location and orientation
            - las-scan-angle:
                long: las-scan-angle
                help: Write the scan angle as read from the las file
            - orientation:
                long: orientation
                help: Write the roll pitch and yaw
            - platform:
                long: platform
                help: Write the X Y Z in the platform coordinate system
            - partials:
                long: partials
                help: Write the partial derivatives
    - boresight:
        about: Iteratively refines the boresight rotation matrix
        args:
            - TRAJECTORY:
                required: true
                index: 1
                help: The SBET trajectory (.out)
            - LASFILE:
                required: true
                index: 2
                help: The input las file
            - CONFIG:
                required: true
                index: 3
                help: The configuration file
            - decimation:
                short: d
                long: decimation
                takes_value: true
                help: The amount to decimate the points used for boresight alignment
    - measurement:
        about: Write a single measurement to stdout (in debug format)
        args:
            - TRAJECTORY:
                required: true
                index: 1
                help: The SBET trajectory (.out)
            - LASFILE:
                required: true
                index: 2
                help: The input las file
            - CONFIG:
                required: true
                index: 3
                help: The configuration file
            - INDEX:
                required: true
                index: 4
                help: The index of the point to write (zero-indexed)
    - partials:
        about: Asses the partial derivatives
        args:
            - TRAJECTORY:
                required: true
                index: 1
                help: The SBET trajectory (.out)
            - LASFILE:
                required: true
                index: 2
                help: The input las file
            - CONFIG:
                required: true
                index: 3
                help: The configuration file
            - OUTFILE:
                required: true
                index: 4
                help: The output csv file
            - decimation:
                short: d
                long: decimation
                takes_value: true
                help: The amount to decimate the points used for boresight alignment
            - delta:
                long: delta
                takes_value: true
                help: The amount to wiggle the variable to test the partial's correctness